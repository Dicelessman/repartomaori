<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reparto Maori TO4-Bra - Scheda Esploratore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="js/firebaseConfig.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/logout.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/esplo.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Container per i toast -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50"></div>
    
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <h1 class="text-xl font-bold text-primary">Reparto Maori TO4-Bra</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="dashboard.html" class="text-gray-600 hover:text-primary">Dashboard</a>
                    <button id="logoutBtn" class="text-red-600 hover:text-red-800">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <div id="loading" class="flex items-center justify-center min-h-screen">
                <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
            </div>

            <div id="schedaContent" class="hidden">
                <!-- Header con nome e controlli -->
                <div class="bg-white shadow overflow-hidden sm:rounded-lg mb-6">
                    <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                        <div>
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="nomeCompleto"></h3>
                            <p class="mt-1 max-w-2xl text-sm text-gray-500">
                                <a href="#" id="emailLink" class="text-primary hover:text-primary-light"></a>
                            </p>
                        </div>
                        <div id="staffControls" class="hidden">
                            <button id="editBtn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                </svg>
                                Modifica
                            </button>
                            <button id="saveBtn" class="hidden inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                                Salva
                            </button>
                            <button id="cancelBtn" class="hidden inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                                Annulla
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Menu di navigazione -->
                <div class="mb-6 bg-white shadow rounded-lg">
                    <nav class="flex flex-wrap gap-2 p-4" aria-label="Tabs">
                        <button onclick="caricaSezione('anagrafici')" class="px-3 py-2 text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-light">
                            Informazioni Personali
                        </button>
                        <button onclick="caricaSezione('contatti')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Contatti
                        </button>
                        <button onclick="caricaSezione('sanitarie')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Informazioni Sanitarie
                        </button>
                        <button onclick="caricaSezione('progressione')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Progressione Verticale
                        </button>
                        <button onclick="caricaSezione('specialita')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Specialità
                        </button>
                        <button onclick="caricaSezione('eventi')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Eventi
                        </button>
                        <button onclick="caricaSezione('documenti')" class="px-3 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-primary hover:bg-gray-50">
                            Documenti
                        </button>
                    </nav>
                </div>

                <!-- Container per il contenuto delle sezioni -->
                <div id="sezioneContent" class="bg-white shadow overflow-hidden sm:rounded-lg">
                    <!-- Il contenuto delle sezioni verrà caricato qui dinamicamente -->
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        import { showLoader, hideLoader } from './js/ui.js';

        // Funzione per caricare dinamicamente le sezioni
        window.caricaSezione = async function(sezione) {
            const container = document.getElementById('sezioneContent');
            try {
                showLoader();
                const response = await fetch(`sezioni/${sezione}.html`);
                if (!response.ok) throw new Error('Sezione non trovata');
                const content = await response.text();
                container.innerHTML = content;
                
                // Aggiorna lo stato attivo dei pulsanti
                document.querySelectorAll('nav button').forEach(btn => {
                    if (btn.textContent.toLowerCase().includes(sezione)) {
                        btn.classList.add('bg-primary', 'text-white');
                        btn.classList.remove('text-gray-600', 'hover:bg-gray-50');
                    } else {
                        btn.classList.remove('bg-primary', 'text-white');
                        btn.classList.add('text-gray-600', 'hover:bg-gray-50');
                    }
                });
            } catch (error) {
                console.error('Errore nel caricamento della sezione:', error);
                container.innerHTML = '<div class="p-4 text-red-600">Errore nel caricamento della sezione</div>';
            } finally {
                hideLoader();
            }
        }

        // Carica la sezione anagrafici all'avvio
        document.addEventListener('DOMContentLoaded', () => {
            caricaSezione('anagrafici');
        });
    </script>
</body>
</html> 